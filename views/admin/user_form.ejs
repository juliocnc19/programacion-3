<%- include('../partials/header') %>
<div class="container mt-5">
  <h2><%= user ? 'Editar Usuario' : 'Nuevo Usuario' %></h2>
  <form method="POST" action="<%= user ? ('/admin/users/edit/' + user.id) : '/admin/users/new' %>">
    <div class="mb-3">
      <label for="username" class="form-label">Usuario</label>
      <input type="text" class="form-control" id="username" name="username" required value="<%= user ? user.username : '' %>">
    </div>
    <div class="mb-3">
      <label for="email" class="form-label">Correo Electrónico</label>
      <input type="email" class="form-control" id="email" name="email" required value="<%= user ? user.email : '' %>">
    </div>
    <div class="mb-3">
      <label for="ci" class="form-label">Cédula</label>
      <input type="number" class="form-control" id="ci" name="ci" required value="<%= user ? user.ci : '' %>">
    </div>
    <% if (!user) { %>
    <div class="mb-3">
      <label for="password" class="form-label">Contraseña</label>
      <input type="password" class="form-control" id="password" name="password" required>
    </div>
    <% } %>
    <div class="mb-3">
      <label for="roleId" class="form-label">Rol</label>
      <select class="form-select" id="roleId" name="roleId" required>
        <% roles.forEach(role => { %>
          <option value="<%= role.id %>" <%= user && user.roleId === role.id ? 'selected' : '' %>><%= role.name %></option>
        <% }) %>
      </select>
    </div>
    <button type="submit" class="btn btn-primary">Guardar</button>
    <a href="/admin/users" class="btn btn-secondary">Cancelar</a>
  </form>
</div>
<%- include('../partials/footer') %>
